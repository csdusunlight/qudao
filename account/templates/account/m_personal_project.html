{% load staticfiles %}
<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>自建项目详情</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="{% static 'css/mui.min.css' %}" rel="stylesheet" />
		<script type="text/javascript" src="{% static 'js/rem.js' %}"></script>
		<style type="text/css">
			body {
				background: white;
			}
			
			table {
				color: RGB(102, 102, 102);
				font-size: 1.2rem;
			}
			
			td {
				padding: 1rem 1.3rem;
			}
			
			.txt {
				border: 1px solid RGB(153, 153, 153);
				border-radius: 6px;
				width: 18rem;
				height: 3rem;
				line-height: 3rem;
				position: relative;
			}
			
			.btn {
				width: 16rem;
				height: 4rem;
				background: RGB(145, 193, 29);
				text-align: center;
				line-height: 4rem;
				color: white;
				border-radius: 10px;
				margin-left: 6rem;
				font-size: 1.4rem;
			}
			
			.decrBox {
				width: 100%;
				height: 3rem;
				position: relative;
			}
			
			.decrBox li {
				list-style: none;
				float: left;
				width: 4rem;
				height: 3rem;
				text-align: center;
				line-height: 3rem;
				margin-left: 1rem;
				border-radius: 6px;
			}
			
			.decrBox li:nth-child(1) {
				position: absolute;
				left: -1.5rem;
			}
			
			.decrBox li:nth-child(1),
			.decrBox li:nth-child(2) {
				background: RGB(254, 191, 0);
				color: white;
			}
			
			.decrBox li:nth-child(3),
			.decrBox li:nth-child(4) {
				border: 1px solid RGB(254, 191, 0);
				color: RGB(254, 191, 0);
			}
			
			.box {
				width: 1.2rem;
				height: 1.2rem;
			}
			
			.box1 {
				width: 1.2rem;
				height: 1.2rem;
			}
			
			.box2 {
				width: 1.2rem;
				height: 1.2rem;
			}
		</style>
	</head>

	<body>
		<header id="header" class="mui-bar mui-bar-nav">

			<h1 class="mui-title" style="color: RGB(102,102,102);">查看详情</h1>
		</header>
		<div class="mui-content" style="background: white;">
			<form>
				<table>
					<tr>
						<td><span>项目名称</span></td>
						<td><span id="title"></span></td>
					</tr>
					<tr>
						<td><span>客户指导价</span></td>
						<td>
							<div class="txt">
								<span id="cprice">15111203705</span>
							</div>
						</td>
					</tr>
					<tr>
						<td><span>主页价格</span></td>
						<td>
							<div class="txt">
								<span id="shortprice">100返2.9</span>
							</div>
						</td>
					</tr>
					<tr>
						<td><span>标期</span></td>
						<td>
							<div class="txt">
								<span id="term">2017/09/12</span>
							</div>
						</td>
					</tr>
					<tr>
						<td><span>投资区间</span></td>
						<td>
							<div class="txt">
								<span id="investrange">30天</span>
							</div>
						</td>
					</tr>
					<tr>
						<td><span>预计年化</span></td>
						<td>
							<div class="txt">
								<span id="intrest">30000元</span>
							</div>
						</td>
					</tr>
					<tr>
						<td><span>是否主业呈现</span></td>
						<td>
							<div class="mui-switch mui-switch-mini mui-active">
								<div class="mui-switch-handle"></div>
							</div>
						</td>
					</tr>
					<tr>
						<td><span>是否推荐</span></td>
						<td>
							<div class="mui-switch mui-switch-mini mui-active">
								<div class="mui-switch-handle"></div>
							</div>
						</td>
					</tr>
					<tr>
						<td>允许复投</td>
						<td>
							<input class="box" type="checkbox" name="yes_no" value="是" />是
							<input class="box" type="checkbox" name="yes_no" value="否" style="margin-left: 4rem;" />否
						</td>
					</tr>
					<tr>
						<td>需要预约</td>
						<td>
							<input class="box1" type="checkbox" name="older" />是
							<input class="box1" type="checkbox" name="older" style="margin-left: 4rem;" />否
						</td>
					</tr>
					<tr>
						<td><span>项目标签</span></td>
						<td>
							<ul class="decrBox">
								<li>稳健型</li>
								<li>稳健型</li>
								<li>稳健型</li>
								<li>稳健型</li>
							</ul>
						</td>
					</tr>
					<tr>
						<td colspan="2">
							<span style="margin-left: 12rem;">用户交单项</span>
						</td>
					</tr>
					<tr>
						<td colspan="2">
							<input class="box2" value="0" type="checkbox" disabled="disabled" />投资姓名/用户名
							<input class="box2" value="1" type="checkbox" disabled="disabled" style="margin-left: 2rem;" />投资金额
							<input class="box2" value="2" type="checkbox" disabled="disabled" style="margin-left: 2rem;" />投资标期
						</td>
					</tr>
					<tr>
						<td colspan="2">
							<input class="box2" value="3" type="checkbox" disabled="disabled" />投资日期
							<input class="box2" value="4" type="checkbox" disabled="disabled" style="margin-left: 6rem;" />收款信息
							<input class="box2" value="5" type="checkbox"  disabled="disabled"style="margin-left: 1.8rem;" />投资手机号
						</td>
					</tr>
					<tr>
						<td colspan="2">
							<input class="box2" value="6" type="checkbox" />用户预期返现金额
							<input class="box2" value="7" type="checkbox" style="margin-left:1.2rem ;" />QQ
							<input class="box2" value="8" type="checkbox" style="margin-left:4.8rem;" />投资截图
						</td>
					</tr>
					<tr>
						<td colspan="2">
							<a href="#">
								<div class="btn">确定</div>
							</a>
						</td>
					</tr>
				</table>
			</form>
		</div>

		<script src="{% static 'js/mui.min.js' %}"></script>
		<script type="text/javascript">
			mui.init();
			var project_id = "{{id}}";
			var title = document.getElementById('title'),
			    cprice = document.getElementById('cprice'),
			    shortprice = document.getElementById('shortprice'),
			    term = document.getElementById('term'),
			    investrange = document.getElementById('investrange'),
			    intrest = document.getElementById('intrest');
			    
			mui.ajax('/restapi/projects/' + project_id + '/',{
                dataType:'json',//服务器返回json格式数据
                type:'get',//HTTP请求类型
                timeout:10000,//超时时间设置为10秒；
                success:function(ret){
                    console.log(ret);
                    title.innerText = ret.title;
                    cprice.innerText = ret.cprice?ret.cprice:ret.cprice;
                    shortprice.innerText = ret.shortprice;
                    term.innerText = ret.term;
                    investrange.innerText = ret.investrange;
                    intrest.innerText = ret.intrest;
                    
                    var need_str = ret.necessary_fields;
                    var need_set = need_str.split(',');
                    var need_id;
                    console.log(need_set);
                    for (need_id in need_set) {
                        var dom = 'input[value="'+ need_set[need_id].replace(/(^\s*)|(\s*$)/g, "") +'"]';
                        console.log(mui(dom));
                        mui(dom)[0].checked = true;
                    }
                },
                error:function(xhr,type,errorThrown){
                    console.log(xhr.responseText);
                }
            });
		</script>
	</body>

</html>