{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>用户中心</title>
<link href="{% static 'images/favicon.ico'%}" rel="shortcut icon"/>
<!--<link rel="stylesheet" type="text/css" href="{% static 'css/User.css' %}" />-->
<link rel="stylesheet" type="text/css" href="{% static 'css/wfl-common.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'css/account-base.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'css/doclist.css' %}" />
<script type="text/javascript" src="{% static 'js/jquery-1.11.2.min.js' %}"></script>

</head>

<body>
    	<!--头部-->
{% include "header.html" %}
   	<!--内容-->
<div class="Content">
   	<!--<div class="w1100">-->
			{% include "account/left.html" %}
            <div class="RightCont">
                <ul class="doc__box">
                    {% for doc in docs %}
                    <li class="doc__list">
                        <a class="doc__link" href="/docs/{{doc.id}}"><h4 class="doc__title one-line">{{doc.title}}</h4></a>
                        <span class="doc__set"></span>
                        <div class="doc__handle">
                            <input class="doc_rename doc__handleitem" value="{{doc.title}}" type="text" />
                            <span class="doc_copy doc__handleitem">创建副本</span>
                            <span class="doc_del doc__handleitem">删除</span>
                            <span class="doc_rename doc__handleitem">分享</span>
                        </div>
                    </li>
                    {%endfor%}
                	<!--<li class="doc__list">
                	    <a class="doc__link" href="#"><h4 class="doc__title one-line">和时代一期</h4></a>
                	    <span class="doc__set"></span>
                	    <div class="doc__handle">
                	        <input class="doc_rename doc__handleitem" value="和时代一期" type="text" />
                	        <span class="doc_copy doc__handleitem">创建副本</span>
                            <span class="doc_del doc__handleitem">删除</span>
                	    </div>
                	</li>
                	<li class="doc__list">
                        <a class="doc__link" href="#"><h4 class="doc__title one-line">和时代一期</h4></a>
                        <span class="doc__set"></span>
                        <div class="doc__handle">
                            <input class="doc_rename doc__handleitem" value="和时代一期" type="text" />
                            <span class="doc_copy doc__handleitem">创建副本</span>
                            <span class="doc_del doc__handleitem">删除</span>
                        </div>
                    </li>-->
                    
                </ul>
                
            </div>
            
</div>
{% include "footer.html" %}

<script type="text/javascript" src="{% static 'js/wfl-common.js' %}"></script>
<script type="text/javascript">
$(function(){
}); 
    var parent_dom;     //全局，所有父元素
    $('.back-a13').toggleClass("on");
    
    $('.doc__box').on('click', '.doc__set', function(){
        $('.doc__list').removeClass('m-show');
        $('.doc__handle').removeClass('m-show');
        stopBubble();
        parent_dom = $(this).parent();
        $(parent_dom).addClass('m-show');
        $(parent_dom).find('.doc__handle').addClass('m-show');
    })
    $('.doc__box').on('click', '.doc__handle', function(){
        stopBubble();
    })
    $('body').click(function(){
        console.log('hide');
        $('.doc__list').removeClass('m-show');
        $('.doc__handle').removeClass('m-show');
    })
    $('.doc__box').on('click', '.doc_copy', function(){     //创建副本
        $(this).parent().removeClass('m-show');
        $(this).parent().parent().removeClass('m-show');
        parent_dom = $(this).parent().parent();
        var doc_title = $(parent_dom).find('.doc__title').text();
        var copy_dom = $(parent_dom).clone();
        $(copy_dom).find('.doc__title').text(doc_title + ' 副本');
        $('.doc__box').prepend(copy_dom)
    })
    $('.doc__box').on('blur', '.doc_rename', function(){     //重命名文档
        parent_dom = $(this).parent().parent();
        console.log($(this).val());
        $(parent_dom).find('.doc__title').text($(this).val());
    })
    $('.doc__box').on('click', '.doc_del', function(){     //删除文档
        $(this).parent().parent().remove();
    })
    
    function stopBubble(e) {            //阻止时间冒泡 
        //如果提供了事件对象，则这是一个非IE浏览器 
        if ( e && e.stopPropagation ) {
            //因此它支持W3C的stopPropagation()方法 
            e.stopPropagation(); 
        }
        else {
            //否则，我们需要使用IE的方式来取消事件冒泡 
            window.event.cancelBubble = true; 
        }
    }
    
</script>
</body>
</html>
